var FormImageCrop=function(){var j=function(){$("#demo1").Jcrop()};var g=function(){var k;$("#demo2").Jcrop({onChange:m,onSelect:m,onRelease:l},function(){k=this});$("#coords").on("change","input",function(r){var o=$("#x1").val(),n=$("#x2").val(),q=$("#y1").val(),p=$("#y2").val();k.setSelect([o,q,n,p])});function m(n){$("#x1").val(n.x);$("#y1").val(n.y);$("#x2").val(n.x2);$("#y2").val(n.y2);$("#w").val(n.w);$("#h").val(n.h)}function l(){$("#coords input").val("")}};var f=function(){var s,q,p,m=$("#preview-pane"),r=$("#preview-pane .preview-container"),l=$("#preview-pane .preview-container img"),o=r.width(),n=r.height();console.log("init",[o,n]);$("#demo3").Jcrop({onChange:k,onSelect:k,aspectRatio:o/n},function(){var t=this.getBounds();q=t[0];p=t[1];s=this;m.appendTo(s.ui.holder)});function k(v){if(parseInt(v.w)>0){var u=o/v.w;var t=n/v.h;l.css({width:Math.round(u*q)+"px",height:Math.round(t*p)+"px",marginLeft:"-"+Math.round(u*v.x)+"px",marginTop:"-"+Math.round(t*v.y)+"px"})}}};var e=function(){var t;$("#demo4").Jcrop({bgFade:true,bgOpacity:0.2,setSelect:[60,70,540,330]},function(){t=this});$("#fadetog").change(function(){t.setOptions({bgFade:this.checked})}).attr("checked",true);App.updateUniform("#fadetog");$("#shadetog").change(function(){if(this.checked){$("#shadetxt").slideDown()}else{$("#shadetxt").slideUp()}t.setOptions({shade:this.checked})}).attr("checked",false);var r={bgc_buttons:"Change bgColor",bgo_buttons:"Change bgOpacity",anim_buttons:"Animate Selection"};var s={anim1:[217,122,382,284],anim2:[20,20,580,380],anim3:[24,24,176,376],anim4:[347,165,550,355],anim5:[136,55,472,183]};var o={Low:0.2,Mid:0.5,High:0.8,Full:1};var l={R:"#900",B:"#4BB6F0",Y:"#F0B207",G:"#46B81C",W:"white",K:"black"};for(i in r){m(i,r[i])}function p(v){var u=$("<button />").addClass("btn small");if(v){u.append(v)}return u}var n=1;for(i in s){$("#anim_buttons .btn-group").append(p(n++).click(k(s[i]))," ")}$("#anim_buttons .btn-group").append(p("Bye!").click(function(u){$(u.target).addClass("active");t.animateTo([300,200,300,200],function(){this.release();$(u.target).closest(".btn-group").find(".active").removeClass("active")});return false}));for(i in o){$("#bgo_buttons .btn-group").append(p(i).click(q("bgOpacity",o[i]))," ")}for(i in l){$("#bgc_buttons .btn-group").append(p(i).css({background:l[i],color:((i=="K")||(i=="R"))?"white":"black"}).click(q("bgColor",l[i]))," ")}function m(w,u){$("#interface").prepend($("<fieldset></fieldset>").attr("id",w).append($("<h4></h4>").append(u),'<div class="btn-toolbar"><div class="btn-group"></div></div>'))}function q(w,u){return function(x){$(x.target).closest(".btn-group").find(".active").removeClass("active");$(x.target).addClass("active");var v={};v[w]=u;t.setOptions(v);return false}}function k(u){return function(v){$(v.target).addClass("active");t.animateTo(u,function(){$(v.target).closest(".btn-group").find(".active").removeClass("active")});return false}}$("#bgo_buttons .btn:first,#bgc_buttons .btn:last").addClass("active");$("#interface").show()};var d=function(){var k;l();function l(){$(".requiresjcrop").hide();$("#demo5").Jcrop({onRelease:n},function(){k=this;k.animateTo([100,100,400,300]);$("#can_click,#can_move,#can_size").attr("checked","checked");App.updateUniform("#can_click,#can_move,#can_size");$("#ar_lock,#size_lock,#bg_swap").attr("checked",false);App.updateUniform("#ar_lock,#size_lock,#bg_swap");$(".requiresjcrop").show()})}function m(){var o=k.getBounds();return[Math.round(Math.random()*o[0]),Math.round(Math.random()*o[1]),Math.round(Math.random()*o[0]),Math.round(Math.random()*o[1])]}function n(){k.setOptions({allowSelect:true});$("#can_click").attr("checked",false);App.updateUniform("#can_click")}$("#setSelect").click(function(o){k.setSelect(m())});$("#animateTo").click(function(o){k.animateTo(m())});$("#release").click(function(o){k.release()});$("#disable").click(function(o){k.disable();$("#enable").show();$(".requiresjcrop").hide()});$("#enable").click(function(o){k.enable();$("#enable").hide();$(".requiresjcrop").show()});$("#rehook").click(function(o){$("#rehook,#enable").hide();l();$("#unhook,.requiresjcrop").show();return false});$("#unhook").click(function(o){k.destroy();$("#unhook,#enable,.requiresjcrop").hide();$("#rehook").show();return false});$("#img1").click(function(o){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");k.setImage("assets/plugins/jcrop/demos/demo_files/sago.jpg");k.setOptions({bgOpacity:0.6});return false});$("#img2").click(function(o){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");k.setImage("assets/plugins/jcrop/demos/demo_files/pool.jpg");k.setOptions({bgOpacity:0.6});return false});$("#img3").click(function(o){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");k.setImage("assets/plugins/jcrop/demos/demo_files/sago.jpg",function(){this.setOptions({bgOpacity:1,outerImage:"assets/plugins/jcrop/demos/demo_files/sagomod.jpg"});this.animateTo(m())});return false});$("#can_click").change(function(o){k.setOptions({allowSelect:!!this.checked});k.focus()});$("#can_move").change(function(o){k.setOptions({allowMove:!!this.checked});k.focus()});$("#can_size").change(function(o){k.setOptions({allowResize:!!this.checked});k.focus()});$("#ar_lock").change(function(o){k.setOptions(this.checked?{aspectRatio:4/3}:{aspectRatio:0});k.focus()});$("#size_lock").change(function(o){k.setOptions(this.checked?{minSize:[80,80],maxSize:[350,350]}:{minSize:[0,0],maxSize:[0,0]});k.focus()})};var c=function(){var k;$("#demo6").Jcrop({bgOpacity:0.5,bgColor:"white",addClass:"jcrop-light"},function(){k=this;k.setSelect([130,65,130+350,65+285]);k.setOptions({bgFade:true});k.ui.selection.addClass("jcrop-selection")});$("#buttonbar").on("click","button",function(m){var n=$(this),l=n.closest(".btn-group");l.find("button.active").removeClass("active");n.addClass("active");l.find("[data-setclass]").each(function(){var p=$(this),q=p.data("setclass"),o=p.hasClass("active");if(o){k.ui.holder.addClass(q);switch(q){case"jcrop-light":k.setOptions({bgColor:"white",bgOpacity:0.5});break;case"jcrop-dark":k.setOptions({bgColor:"black",bgOpacity:0.4});break;case"jcrop-normal":k.setOptions({bgColor:$.Jcrop.defaults.bgColor,bgOpacity:$.Jcrop.defaults.bgOpacity});break}}else{k.ui.holder.removeClass(q)}})})};var b=function(){var k={x:13,y:7,x2:487,y2:107,w:474,h:100};$("#demo7").Jcrop({bgFade:true,setSelect:[k.x,k.y,k.x2,k.y2]})};var a=function(){$("#demo8").Jcrop({aspectRatio:1,onSelect:k});function k(l){$("#crop_x").val(l.x);$("#crop_y").val(l.y);$("#crop_w").val(l.w);$("#crop_h").val(l.h)}$("#demo8_form").submit(function(){if(parseInt($("#crop_w").val())){return true}alert("Please select a crop region then press submit.");return false})};var h=function(){if($(window).width()<=1024){$(".responsive-1024").addClass("col-md-12")}else{$(".responsive-1024").removeClass("col-md-12")}};return{init:function(){if(!jQuery().Jcrop){return}App.addResponsiveHandler(h);h();j();g();f();e();d();c();b();a()}}}();